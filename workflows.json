[
    {
        "name": "Morning News Scraper",
        "enabled": true,
        "steps": [
            {
                "type": "log",
                "message": "Starting news scraper task..."
            },
            {
                "type": "http",
                "method": "GET",
                "url": "https://hacker-news.firebaseio.com/v0/topstories.json",
                "output_var": "top_ids"
            },
            {
                "type": "python",
                "code": "log('Found ' + str(len(vars['top_ids'])) + ' stories')\nvars['top_5'] = vars['top_ids'][:5]"
            },
            {
                "type": "loop",
                "items_from_var": "top_5",
                "loop_var": "story_id",
                "steps": [
                    {
                        "type": "http",
                        "method": "GET",
                        "url": "https://hacker-news.firebaseio.com/v0/item/{story_id}.json",
                        "output_var": "story_detail"
                    },
                    {
                        "type": "log",
                        "message": "Title: {story_detail[title]}"
                    }
                ]
            }
        ]
    },
    {
        "name": "Repo Star Tracker",
        "enabled": true,
        "steps": [
            {
                "type": "log",
                "message": "Checking stats for luoluoluo22/gh-action-log-monitor..."
            },
            {
                "type": "http",
                "method": "GET",
                "url": "https://api.github.com/repos/luoluoluo22/gh-action-log-monitor",
                "output_var": "repo_data"
            },
            {
                "type": "log",
                "message": "Stars: {repo_data[stargazers_count]}, Forks: {repo_data[forks_count]}"
            }
        ]
    },
    {
        "name": "Quicker Recent Actions Scraper",
        "enabled": true,
        "steps": [
            {
                "type": "log",
                "message": "Fetching recent Quicker actions..."
            },
            {
                "type": "http",
                "method": "GET",
                "url": "https://getquicker.net/Share/Recent",
                "output_var": "quicker_html"
            },
            {
                "type": "python",
                "code": "import re\nhtml = vars['quicker_html']\n# 提取动作名称和代码的正则\npattern = r'href=\"/Sharedaction\\?code=([^\"]+)\"[^>]*>\\s*([^<]+)\\s*</a>'\nmatches = re.findall(pattern, html)\n\nresults = []\nseen_codes = set()\nfor code, name in matches:\n    name = name.strip()\n    if name and \"\\n\" not in name and code not in seen_codes:\n        results.append({\"name\": name, \"url\": f\"https://getquicker.net/Sharedaction?code={code}\"})\n        seen_codes.add(code)\n\nlog(f\"Successfully found {len(results)} new actions.\")\nfor action in results[:8]:\n    log(f\"[Quicker] {action['name']} -> {action['url']}\")"
            }
        ]
    }
]